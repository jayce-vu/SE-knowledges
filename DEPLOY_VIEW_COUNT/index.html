<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>
      Hướng dẫn Deploy Tính Năng Đếm Lượt View · SE-knowledges
    </title>
    <link rel="stylesheet" href="/SE-knowledges/assets/css/style.css" />
  </head>
  <body>
    <header class="site">
  <div class="wrap nav">
    <div class="brand">
      <a class="title" href="/SE-knowledges/">SE-knowledges</a>
      <span class="subtitle">Technical notes and articles in Vietnamese and English.</span>
    </div>
    <div>
      
      
      
      

      

      
        <a class="button" href="/SE-knowledges/en/">English</a>
        <a class="button" href="/SE-knowledges/vi/">Tiếng Việt</a>
      
    </div>
  </div>
</header>

    <main class="wrap">
      <h1 id="hướng-dẫn-deploy-tính-năng-đếm-lượt-view">Hướng dẫn Deploy Tính Năng Đếm Lượt View</h1>

<p>Tính năng này sử dụng <strong>Cloudflare Workers</strong> (miễn phí) để xử lý logic đếm và <strong>Cloudflare KV</strong> để lưu trữ dữ liệu.</p>

<h2 id="bước-1-tạo-cloudflare-worker">Bước 1: Tạo Cloudflare Worker</h2>

<ol>
  <li>Đăng nhập vào <a href="https://dash.cloudflare.com/">Cloudflare Dashboard</a>.</li>
  <li>Vào mục <strong>Workers &amp; Pages</strong>.</li>
  <li>Nhấn <strong>Create Application</strong> -&gt; <strong>Create Worker</strong>.</li>
  <li>Đặt tên cho worker (ví dụ: <code class="language-plaintext highlighter-rouge">blog-views</code>).</li>
  <li>Nhấn <strong>Deploy</strong> (đừng lo về code mặc định, ta sẽ sửa sau).</li>
</ol>

<h2 id="bước-2-tạo-kv-namespace-cơ-sở-dữ-liệu">Bước 2: Tạo KV Namespace (Cơ sở dữ liệu)</h2>

<ol>
  <li>Trong dashboard của Worker vừa tạo, vào tab <strong>Settings</strong>.</li>
  <li>Chọn <strong>Variables</strong> (hoặc <strong>KV Namespaces</strong> ở menu trái của trang Workers chính).</li>
  <li>Tạo một KV Namespace mới, đặt tên là <code class="language-plaintext highlighter-rouge">VIEWS_DB</code>.</li>
  <li>Quay lại trang <strong>Settings</strong> -&gt; <strong>Variables</strong> của Worker <code class="language-plaintext highlighter-rouge">blog-views</code>.</li>
  <li>Tại mục <strong>KV Namespace Bindings</strong>, nhấn <strong>Add binding</strong>:
    <ul>
      <li><strong>Variable name</strong>: <code class="language-plaintext highlighter-rouge">VIEWS</code> (Bắt buộc phải là tên này vì code dùng biến này).</li>
      <li><strong>KV Namespace</strong>: Chọn <code class="language-plaintext highlighter-rouge">VIEWS_DB</code> vừa tạo.</li>
    </ul>
  </li>
  <li>Nhấn <strong>Save and Deploy</strong>.</li>
</ol>

<h2 id="bước-3-cập-nhật-code-worker">Bước 3: Cập nhật Code Worker</h2>

<ol>
  <li>Vào tab <strong>Overview</strong> của Worker, nhấn <strong>Quick Edit</strong>.</li>
  <li>Xóa hết code cũ, copy toàn bộ nội dung từ file <code class="language-plaintext highlighter-rouge">backend/worker.js</code> trong project này dán vào.</li>
  <li>Nhấn <strong>Save and Deploy</strong>.</li>
</ol>

<h2 id="bước-4-cấu-hình-blog">Bước 4: Cấu hình Blog</h2>

<ol>
  <li>Copy đường dẫn Worker của bạn (dạng <code class="language-plaintext highlighter-rouge">https://blog-views.username.workers.dev</code>).</li>
  <li>Mở file <code class="language-plaintext highlighter-rouge">_config.yml</code> trong source code blog.</li>
  <li>Tìm dòng <code class="language-plaintext highlighter-rouge">view_api_url</code> và dán đường dẫn vào:</li>
</ol>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">view_api_url</span><span class="pi">:</span> <span class="s2">"</span><span class="s">https://blog-views.username.workers.dev"</span>
</code></pre></div></div>

<ol>
  <li>Commit và Push code lên GitHub.</li>
</ol>

<h2 id="kiểm-tra">Kiểm tra</h2>

<p>Vào một bài viết bất kỳ trên blog, nếu thấy số lượt view hiển thị (ban đầu là 0 hoặc 1) là thành công!</p>

    </main>
    <footer class="site">
  <div class="wrap">
    <div class="panel">
      <div>
        <span class="pill">EN/VI</span>
        <span class="pill">GitHub Pages</span>
        <span class="pill">Jekyll</span>
      </div>
      <div style="margin-top: 10px;">
        © 2026 SE-knowledges. Built with Jekyll on GitHub Pages.
      </div>
    </div>
  </div>
</footer>


  </body>
</html>

