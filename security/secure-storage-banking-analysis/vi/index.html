<!doctype html>
<html lang="vi">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>
      PHÃ‚N TÃCH CHI TIáº¾T: SECURE STORAGE CHUáº¨N BANKING (ANDROID & iOS) Â· SE-knowledges
    </title>
    <link rel="stylesheet" href="/SE-knowledges/assets/css/style.css" />
  </head>
  <body>
    <header class="site">
  <div class="wrap nav">
    <div class="brand">
      <a class="title" href="/SE-knowledges/">SE-knowledges</a>
      <span class="subtitle">Technical notes and articles in Vietnamese and English.</span>
    </div>
    <div>
      
      
      
      

      

      
        <a class="button" href="/SE-knowledges/security/secure-storage-banking-analysis/en/">English</a>
        <a class="button" href="/SE-knowledges/security/secure-storage-banking-analysis/vi/">Tiáº¿ng Viá»‡t</a>
      
    </div>
  </div>
</header>

    <main class="wrap">
      
<meta name="pair-id" content="secure-storage-banking-analysis">


<article class="panel">
  <div class="post-meta">
    2026-01-07
    <span id="view-count-container" style="display:none">
      Â· <span id="view-count">...</span> views
    </span>
    
      Â·
      
        <span class="pill">android</span>
      
        <span class="pill">ios</span>
      
        <span class="pill">security</span>
      
        <span class="pill">banking</span>
      
    
  </div>

  <h1 style="margin-top: 6px;">PHÃ‚N TÃCH CHI TIáº¾T: SECURE STORAGE CHUáº¨N BANKING (ANDROID & iOS)</h1>
  
    <p class="post-meta">PhÃ¢n tÃ­ch chi tiáº¿t vá» Secure Storage chuáº©n Banking trÃªn Android vÃ  iOS, bao gá»“m Android Keystore, iOS Keychain, Secure Enclave vÃ  cÃ¡c tiÃªu chuáº©n báº£o máº­t quan trá»ng.</p>
  

  
    
      
      
    
  

  <div>
    <h2 id="bá»‘i-cáº£nh">Bá»‘i cáº£nh</h2>

<p>Trong phÃ¡t triá»ƒn á»©ng dá»¥ng ngÃ¢n hÃ ng (Banking App), báº£o máº­t dá»¯ liá»‡u lÃ  yáº¿u tá»‘ sá»‘ng cÃ²n. Má»™t trong nhá»¯ng cÃ¢u há»i quan trá»ng nháº¥t tá»« cÃ¡c Auditor lÃ : â€œDá»¯ liá»‡u nháº¡y cáº£m (token, key) Ä‘Æ°á»£c lÆ°u trá»¯ nhÆ° tháº¿ nÃ o?â€. BÃ i viáº¿t nÃ y phÃ¢n tÃ­ch chi tiáº¿t vá» Secure Storage chuáº©n Banking trÃªn hai ná»n táº£ng Android vÃ  iOS.</p>

<h2 id="i-android--android-keystore-banking-grade">I. ANDROID â€“ ANDROID KEYSTORE (BANKING GRADE)</h2>

<h3 id="1ï¸âƒ£-android-keystore-lÃ -gÃ¬-hiá»ƒu-Ä‘Ãºng">1ï¸âƒ£ Android Keystore lÃ  gÃ¬ (hiá»ƒu Ä‘Ãºng)</h3>

<p>Android Keystore khÃ´ng pháº£i lÃ  nÆ¡i lÆ°u data, mÃ  lÃ  nÆ¡i lÆ°u <strong>KEY</strong>.</p>

<ul>
  <li><strong>Data (token)</strong> â†’ encrypt</li>
  <li><strong>Encrypted data</strong> â†’ lÆ°u á»Ÿ file/db bÃ¬nh thÆ°á»ng</li>
  <li><strong>Key Ä‘á»ƒ decrypt</strong> â†’ náº±m trong Keystore</li>
</ul>

<p>ğŸ‘‰ <strong>Attacker cÃ³ file data cÅ©ng khÃ´ng decrypt Ä‘Æ°á»£c náº¿u khÃ´ng cÃ³ key.</strong></p>

<h3 id="2ï¸âƒ£-hardware-backed-tee--strongbox--vÃ¬-sao-cá»±c-ká»³-quan-trá»ng">2ï¸âƒ£ Hardware-backed (TEE / StrongBox) â€“ vÃ¬ sao cá»±c ká»³ quan trá»ng</h3>

<p><strong>TEE (Trusted Execution Environment)</strong></p>
<ul>
  <li>Key náº±m trong vÃ¹ng báº£o máº­t pháº§n cá»©ng</li>
  <li>OS, app, root khÃ´ng Ä‘á»c Ä‘Æ°á»£c</li>
  <li>Crypto operation xáº£y ra bÃªn trong TEE</li>
</ul>

<p><strong>StrongBox (level cao hÆ¡n)</strong></p>
<ul>
  <li>Secure chip riÃªng</li>
  <li>Chá»‘ng physical attack</li>
  <li>Má»™t sá»‘ device cao cáº¥p há»— trá»£</li>
</ul>

<p>ğŸ“Œ <strong>Auditor sáº½ há»i:</strong></p>
<blockquote>
  <p>â€œKey cÃ³ hardware-backed khÃ´ng?â€</p>
</blockquote>

<ul>
  <li>Náº¿u âŒ Software-only key â†’ risk cao</li>
  <li>Náº¿u âœ… Hardware-backed â†’ pass nhiá»u bank</li>
</ul>

<h3 id="3ï¸âƒ£-key-non-exportable--sá»‘ng-cÃ²n">3ï¸âƒ£ Key non-exportable â€“ sá»‘ng cÃ²n</h3>

<p><strong>NghÄ©a lÃ  gÃ¬?</strong>
Key khÃ´ng thá»ƒ export ra ngoÃ i. KhÃ´ng thá»ƒ:</p>
<ul>
  <li>dump memory</li>
  <li>backup</li>
  <li>copy sang device khÃ¡c</li>
</ul>

<p><strong>VÃ¬ sao quan trá»ng?</strong></p>
<ul>
  <li>Root + memory dump â†’ váº«n khÃ´ng láº¥y Ä‘Æ°á»£c key</li>
  <li>Token bá»‹ copy sang mÃ¡y khÃ¡c â†’ decrypt fail</li>
</ul>

<p>ğŸ‘‰ <strong>Náº¿u key exportable â†’ fail audit</strong></p>

<h3 id="4ï¸âƒ£-token-encrypt--store-encrypted-blob-luá»“ng-chuáº©n">4ï¸âƒ£ Token encrypt â†’ store encrypted blob (luá»“ng chuáº©n)</h3>

<p><strong>Flow Ä‘Ãºng:</strong></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[API Response]
    â†“
Encrypt token báº±ng Keystore key
    â†“
Encrypted blob (Base64)
    â†“
LÆ°u file / db / SharedPreferences
</code></pre></div></div>

<p>ğŸ“Œ <strong>Quan trá»ng:</strong></p>
<ul>
  <li>KhÃ´ng bao giá» lÆ°u raw token</li>
  <li>SharedPreferences chá»‰ chá»©a blob Ä‘Ã£ encrypt</li>
</ul>

<p><strong>Auditor sáº½ kiá»ƒm tra:</strong></p>
<ul>
  <li>Dump filesystem</li>
  <li>Náº¿u tháº¥y raw token â†’ fail</li>
</ul>

<h3 id="5ï¸âƒ£-tie-key-vá»›i-user-authentication">5ï¸âƒ£ Tie key vá»›i User Authentication</h3>

<p><strong>NghÄ©a lÃ  gÃ¬?</strong>
Key chá»‰ dÃ¹ng Ä‘Æ°á»£c sau khi user auth:</p>
<ul>
  <li>PIN</li>
  <li>Password</li>
  <li>Biometrics</li>
</ul>

<p><strong>Káº¿t quáº£:</strong></p>
<ul>
  <li>Má»Ÿ app nhÆ°ng chÆ°a auth â†’ decrypt fail</li>
  <li>App bá»‹ background lÃ¢u â†’ pháº£i auth láº¡i</li>
</ul>

<p>ğŸ‘‰ <strong>Chá»‘ng:</strong></p>
<ul>
  <li>Stolen device</li>
  <li>App auto-login nguy hiá»ƒm</li>
</ul>

<h3 id="6ï¸âƒ£-tie-key-vá»›i-device-lock">6ï¸âƒ£ Tie key vá»›i Device Lock</h3>

<p><strong>Ã nghÄ©a:</strong></p>
<ul>
  <li>Device pháº£i cÃ³ lock screen</li>
  <li>User táº¯t lock â†’ key bá»‹ invalidate</li>
</ul>

<p>ğŸ“Œ <strong>Banking app thÆ°á»ng:</strong></p>
<ul>
  <li>Báº¯t buá»™c device cÃ³ PIN/Pattern</li>
  <li>KhÃ´ng cÃ³ â†’ cháº·n app</li>
</ul>

<h3 id="7ï¸âƒ£-tie-key-vá»›i-biometric-optional-nhÆ°ng-ráº¥t-máº¡nh">7ï¸âƒ£ Tie key vá»›i Biometric (optional nhÆ°ng ráº¥t máº¡nh)</h3>

<p>Key chá»‰ usable sau biometric success. DÃ¹ng cho:</p>
<ul>
  <li>Transfer</li>
  <li>View sensitive data</li>
</ul>

<p>ğŸ“Œ <strong>Quan trá»ng:</strong></p>
<ul>
  <li>Biometric khÃ´ng thay tháº¿ PIN</li>
  <li>Chá»‰ lÃ  lá»›p tiá»‡n lá»£i + security thÃªm</li>
</ul>

<h2 id="ii-ios--keychain--secure-enclave-banking-grade">II. iOS â€“ KEYCHAIN + SECURE ENCLAVE (BANKING GRADE)</h2>

<h3 id="1ï¸âƒ£-ios-keychain--khÃ¡c-userdefaults-chá»—-nÃ o">1ï¸âƒ£ iOS Keychain â€“ khÃ¡c UserDefaults chá»— nÃ o?</h3>

<table>
  <thead>
    <tr>
      <th>Â </th>
      <th>Keychain</th>
      <th>UserDefaults</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Encrypt</strong></td>
      <td>Plain text</td>
      <td>Â </td>
    </tr>
    <tr>
      <td><strong>OS protected</strong></td>
      <td>File</td>
      <td>Â </td>
    </tr>
    <tr>
      <td><strong>Hardware support</strong></td>
      <td>KhÃ´ng</td>
      <td>Â </td>
    </tr>
    <tr>
      <td><strong>Audit accepted</strong></td>
      <td>âŒ</td>
      <td>Â </td>
    </tr>
  </tbody>
</table>

<p>Keychain lÃ  secure storage chÃ­nh thá»©c cá»§a iOS.</p>

<h3 id="2ï¸âƒ£-ksecattraccessiblewhenunlockedthisdeviceonly">2ï¸âƒ£ kSecAttrAccessibleWhenUnlockedThisDeviceOnly</h3>

<p><strong>Giáº£i thÃ­ch tá»«ng pháº§n:</strong></p>
<ul>
  <li><strong>WhenUnlocked:</strong> Chá»‰ truy cáº­p khi device Ä‘ang unlock</li>
  <li><strong>ThisDeviceOnly:</strong>
    <ul>
      <li>KhÃ´ng backup</li>
      <li>KhÃ´ng sync iCloud</li>
      <li>KhÃ´ng restore sang device khÃ¡c</li>
    </ul>
  </li>
</ul>

<p>ğŸ‘‰ <strong>ÄÃ¢y lÃ  flag báº¯t buá»™c trong banking</strong></p>

<p><strong>Auditor sáº½ há»i:</strong></p>
<blockquote>
  <p>â€œKeychain item cÃ³ restore Ä‘Æ°á»£c khÃ´ng?â€</p>
</blockquote>

<h3 id="3ï¸âƒ£-secure-enclave--level-cao-nháº¥t-cá»§a-ios">3ï¸âƒ£ Secure Enclave â€“ level cao nháº¥t cá»§a iOS</h3>

<p><strong>Secure Enclave lÃ  gÃ¬?</strong></p>
<ul>
  <li>Chip báº£o máº­t riÃªng</li>
  <li>Key náº±m trong hardware</li>
  <li>OS khÃ´ng Ä‘á»c Ä‘Æ°á»£c</li>
</ul>

<p><strong>Banking dÃ¹ng tháº¿ nÃ o?</strong></p>
<ul>
  <li>Key generate trong Secure Enclave</li>
  <li>Key non-exportable</li>
  <li>Crypto operation trong enclave</li>
</ul>

<p>ğŸ“Œ <strong>KhÃ´ng pháº£i device nÃ o cÅ©ng cÃ³, nhÆ°ng:</strong></p>
<ul>
  <li>Náº¿u cÃ³ â†’ nÃªn dÃ¹ng</li>
  <li>Náº¿u khÃ´ng â†’ Keychain software-backed (still OK)</li>
</ul>

<h3 id="4ï¸âƒ£-khÃ´ng-sync-icloud--vÃ¬-sao">4ï¸âƒ£ KhÃ´ng sync iCloud â€“ vÃ¬ sao?</h3>

<p>Náº¿u sync iCloud:</p>
<ul>
  <li>Token â†’ upload cloud</li>
  <li>Restore â†’ device khÃ¡c decrypt Ä‘Æ°á»£c
âŒ <strong>Fail banking policy</strong></li>
</ul>

<p>ğŸ‘‰ <strong>Pháº£i:</strong></p>
<ul>
  <li>Disable iCloud sync</li>
  <li>Use <code class="language-plaintext highlighter-rouge">ThisDeviceOnly</code></li>
</ul>

<h3 id="5ï¸âƒ£-device-only-binding-cá»‘t-lÃµi">5ï¸âƒ£ Device-only binding (cá»‘t lÃµi)</h3>

<p><strong>NghÄ©a lÃ :</strong>
Token gáº¯n vá»›i:</p>
<ul>
  <li>App instance</li>
  <li>Device hardware</li>
</ul>

<p>Copy sang device khÃ¡c â†’ vÃ´ dá»¥ng</p>

<p>ğŸ“Œ <strong>Combined vá»›i backend:</strong></p>
<ul>
  <li>Backend lÆ°u device_id</li>
  <li>Token chá»‰ há»£p lá»‡ cho device Ä‘Ã³</li>
</ul>

<h2 id="iii-auditor-nhÃ¬n-vÃ o-Ä‘Ã¢u">III. Auditor nhÃ¬n vÃ o Ä‘Ã¢u?</h2>

<p><strong>Android:</strong></p>
<ul>
  <li>Key hardware-backed?</li>
  <li>Non-exportable?</li>
  <li>Token raw cÃ³ tá»“n táº¡i khÃ´ng?</li>
  <li>Key tied vá»›i auth?</li>
  <li>Root detect â†’ wipe key?</li>
</ul>

<p><strong>iOS:</strong></p>
<ul>
  <li>Keychain access control?</li>
  <li>iCloud disabled?</li>
  <li>Secure Enclave used?</li>
  <li>Backup/restore test?</li>
</ul>

<h2 id="iv-nhá»¯ng-lá»—i-phá»•-biáº¿n-khiáº¿n-fail-audit">IV. Nhá»¯ng lá»—i phá»• biáº¿n khiáº¿n FAIL AUDIT</h2>

<ul>
  <li>DÃ¹ng SharedPreferences/UserDefaults cho token</li>
  <li>Key software-only</li>
  <li>Cho phÃ©p backup</li>
  <li>Token decrypt Ä‘Æ°á»£c khi app background</li>
  <li>KhÃ´ng wipe key khi root/JB</li>
</ul>

<h2 id="v-káº¿t-luáº­n-ngáº¯n-gá»n">V. Káº¿t luáº­n ngáº¯n gá»n</h2>

<ul>
  <li>Token khÃ´ng quan trá»ng báº±ng <strong>KEY</strong></li>
  <li>Key khÃ´ng náº±m trong hardware â†’ <strong>khÃ´ng pháº£i banking-grade</strong></li>
</ul>

  </div>
</article>

<script>
  window.VIEW_API_URL = "https://post-views.jayce-it-work.workers.dev";
</script>
<script src="/SE-knowledges/assets/js/view-count.js"></script>

<div style="height: 16px;"></div>

<div class="panel">
  
    <a href="/SE-knowledges/vi/">â† Quay láº¡i danh sÃ¡ch</a>
  
</div>


    </main>
    <footer class="site">
  <div class="wrap">
    <div class="panel">
      <div>
        <span class="pill">EN/VI</span>
        <span class="pill">GitHub Pages</span>
        <span class="pill">Jekyll</span>
      </div>
      <div style="margin-top: 10px;">
        Â© 2026 SE-knowledges. Built with Jekyll on GitHub Pages.
      </div>
    </div>
  </div>
</footer>


  </body>
</html>

