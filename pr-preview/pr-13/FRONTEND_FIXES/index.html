<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>
      Frontend Fixes Summary Â· SE-knowledges
    </title>
    
    <!-- Default Meta Tags -->
    <meta name="description" content="Technical notes and articles in Vietnamese and English." />
    
    <!-- Open Graph / Facebook / LinkedIn / WhatsApp / Telegram / Discord / Slack -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="/SE-knowledges/pr-preview/pr-13/FRONTEND_FIXES/" />
    <meta property="og:title" content="Frontend Fixes Summary" />
    <meta property="og:description" content="Technical notes and articles in Vietnamese and English." />
    <meta property="og:site_name" content="SE-knowledges" />
    <meta property="og:locale" content="en_US" />
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:url" content="/SE-knowledges/pr-preview/pr-13/FRONTEND_FIXES/" />
    <meta name="twitter:title" content="Frontend Fixes Summary" />
    <meta name="twitter:description" content="Technical notes and articles in Vietnamese and English." />
    
    <!-- Additional Meta Tags for Better Compatibility -->
    <meta name="theme-color" content="#0b1020" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    
    <link rel="icon" type="image/svg+xml" href="/SE-knowledges/pr-preview/pr-13/assets/favicon.svg">
    <link rel="stylesheet" href="/SE-knowledges/pr-preview/pr-13/assets/css/style.css" />
    
  </head>
  <body>
    <header class="site">
  <div class="wrap nav">
    <div class="brand">
      <a class="title" href="/SE-knowledges/pr-preview/pr-13/">SE-knowledges</a>
      <span class="subtitle">Technical notes and articles in Vietnamese and English.</span>
    </div>
    <div>
      
      
      
      

      

      
        <a class="button" href="/SE-knowledges/pr-preview/pr-13/en/">English</a>
        <a class="button" href="/SE-knowledges/pr-preview/pr-13/vi/">Tiáº¿ng Viá»‡t</a>
      
      
      <!-- Auth Button (Hidden by default, JS toggles) -->
      <a class="button" id="auth-btn" href="/SE-knowledges/pr-preview/pr-13/login/" style="margin-left: 10px; border: 1px solid #ddd;">Login</a>
      <!-- New Post Button (Only visible when logged in) -->
      <a class="button" id="new-post-btn" href="/SE-knowledges/pr-preview/pr-13/admin/" style="margin-left: 10px; border: 1px solid #7ee787; background: rgba(126, 231, 135, 0.1); display: none;">+ New Post</a>
    </div>
  </div>
  
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const token = localStorage.getItem("token");
      const authBtn = document.getElementById("auth-btn");
      const newPostBtn = document.getElementById("new-post-btn");
      
      if (token) {
        // User is logged in
        authBtn.textContent = "Admin";
        authBtn.href = "/SE-knowledges/pr-preview/pr-13/admin/";
        newPostBtn.style.display = "inline-block";
      } else {
        // User is not logged in
        newPostBtn.style.display = "none";
      }
    });
  </script>
</header>

    <main class="wrap">
      <h1 id="frontend-fixes-summary">Frontend Fixes Summary</h1>

<p><strong>NgÃ y:</strong> $(date)
<strong>Status:</strong> âœ… ÄÃ£ hoÃ n thÃ nh cÃ¡c critical fixes</p>

<hr />

<h2 id="-Ä‘Ã£-sá»­a">âœ… ÄÃ£ Sá»­a</h2>

<h3 id="1-api-response-format-mismatch-">1. <strong>API Response Format Mismatch</strong> âœ…</h3>
<p><strong>Váº¥n Ä‘á»:</strong> API tráº£ vá» <code class="language-plaintext highlighter-rouge">{data, pagination}</code> nhÆ°ng frontend expect array</p>

<p><strong>Giáº£i phÃ¡p:</strong></p>
<ul>
  <li>Táº¡o <code class="language-plaintext highlighter-rouge">parseApiResponse()</code> helper trong <code class="language-plaintext highlighter-rouge">utils.js</code></li>
  <li>Update <code class="language-plaintext highlighter-rouge">index.html</code> vÃ  <code class="language-plaintext highlighter-rouge">admin.js</code> Ä‘á»ƒ handle cáº£ 2 formats</li>
  <li>Táº¡o <code class="language-plaintext highlighter-rouge">home.js</code> riÃªng vá»›i logic má»›i</li>
</ul>

<p><strong>Files changed:</strong></p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">assets/js/utils.js</code> (new)</li>
  <li><code class="language-plaintext highlighter-rouge">assets/js/home.js</code> (new)</li>
  <li><code class="language-plaintext highlighter-rouge">index.html</code></li>
  <li><code class="language-plaintext highlighter-rouge">assets/js/admin.js</code></li>
</ul>

<hr />

<h3 id="2-xss-vulnerability-trong-comments-">2. <strong>XSS Vulnerability trong Comments</strong> âœ…</h3>
<p><strong>Váº¥n Ä‘á»:</strong> Comments render HTML trá»±c tiáº¿p â†’ XSS risk</p>

<p><strong>Giáº£i phÃ¡p:</strong></p>
<ul>
  <li>Táº¡o <code class="language-plaintext highlighter-rouge">escapeHtml()</code> helper trong <code class="language-plaintext highlighter-rouge">utils.js</code></li>
  <li>Update <code class="language-plaintext highlighter-rouge">article-viewer.js</code> Ä‘á»ƒ escape táº¥t cáº£ user input</li>
  <li>Comments giá» Ä‘Æ°á»£c escape trÆ°á»›c khi render</li>
</ul>

<p><strong>Files changed:</strong></p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">assets/js/utils.js</code> (new)</li>
  <li><code class="language-plaintext highlighter-rouge">assets/js/article-viewer.js</code> (new)</li>
  <li><code class="language-plaintext highlighter-rouge">view.html</code></li>
</ul>

<hr />

<h3 id="3-view-count-key-mismatch-">3. <strong>View Count Key Mismatch</strong> âœ…</h3>
<p><strong>Váº¥n Ä‘á»:</strong> Frontend dÃ¹ng <code class="language-plaintext highlighter-rouge">pair_id</code>, API expect <code class="language-plaintext highlighter-rouge">slug</code></p>

<p><strong>Giáº£i phÃ¡p:</strong></p>
<ul>
  <li>Update <code class="language-plaintext highlighter-rouge">view-count.js</code> Ä‘á»ƒ detect slug tá»« nhiá»u sources:
    <ol>
      <li>URL parameter (<code class="language-plaintext highlighter-rouge">?slug=xxx</code>)</li>
      <li>Meta tag <code class="language-plaintext highlighter-rouge">article-slug</code></li>
      <li>Meta tag <code class="language-plaintext highlighter-rouge">pair-id</code> (fallback)</li>
      <li>URL path (fallback)</li>
    </ol>
  </li>
  <li>Encode slug properly vá»›i <code class="language-plaintext highlighter-rouge">encodeURIComponent()</code></li>
</ul>

<p><strong>Files changed:</strong></p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">assets/js/view-count.js</code></li>
</ul>

<hr />

<h3 id="4-hardcoded-author-id-">4. <strong>Hardcoded Author ID</strong> âœ…</h3>
<p><strong>Váº¥n Ä‘á»:</strong> <code class="language-plaintext highlighter-rouge">author_id: 1</code> hardcoded trong admin.js</p>

<p><strong>Giáº£i phÃ¡p:</strong></p>
<ul>
  <li>Táº¡o <code class="language-plaintext highlighter-rouge">getCurrentUser()</code> helper trong <code class="language-plaintext highlighter-rouge">utils.js</code></li>
  <li>Update <code class="language-plaintext highlighter-rouge">admin.js</code> Ä‘á»ƒ láº¥y <code class="language-plaintext highlighter-rouge">author_id</code> tá»« logged in user</li>
  <li>Check user login trÆ°á»›c khi save</li>
</ul>

<p><strong>Files changed:</strong></p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">assets/js/utils.js</code> (new)</li>
  <li><code class="language-plaintext highlighter-rouge">assets/js/admin.js</code></li>
</ul>

<hr />

<h3 id="5-inline-scripts-">5. <strong>Inline Scripts</strong> âœ…</h3>
<p><strong>Váº¥n Ä‘á»:</strong> Scripts viáº¿t trá»±c tiáº¿p trong HTML files</p>

<p><strong>Giáº£i phÃ¡p:</strong></p>
<ul>
  <li>TÃ¡ch táº¥t cáº£ inline scripts ra files riÃªng:
    <ul>
      <li><code class="language-plaintext highlighter-rouge">home.js</code> - Home page logic</li>
      <li><code class="language-plaintext highlighter-rouge">article-viewer.js</code> - Article viewer logic</li>
      <li><code class="language-plaintext highlighter-rouge">auth.js</code> - Login/Register logic</li>
    </ul>
  </li>
  <li>Táº¥t cáº£ files Ä‘á»u include <code class="language-plaintext highlighter-rouge">utils.js</code> trÆ°á»›c</li>
</ul>

<p><strong>Files changed:</strong></p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">assets/js/home.js</code> (new)</li>
  <li><code class="language-plaintext highlighter-rouge">assets/js/article-viewer.js</code> (new)</li>
  <li><code class="language-plaintext highlighter-rouge">assets/js/auth.js</code> (new)</li>
  <li><code class="language-plaintext highlighter-rouge">index.html</code></li>
  <li><code class="language-plaintext highlighter-rouge">view.html</code></li>
  <li><code class="language-plaintext highlighter-rouge">login.html</code></li>
</ul>

<hr />

<h3 id="6-error-handling-">6. <strong>Error Handling</strong> âœ…</h3>
<p><strong>Váº¥n Ä‘á»:</strong> DÃ¹ng <code class="language-plaintext highlighter-rouge">alert()</code> vÃ  khÃ´ng nháº¥t quÃ¡n</p>

<p><strong>Giáº£i phÃ¡p:</strong></p>
<ul>
  <li>Táº¡o <code class="language-plaintext highlighter-rouge">showError()</code> vÃ  <code class="language-plaintext highlighter-rouge">showSuccess()</code> helpers</li>
  <li>Replace <code class="language-plaintext highlighter-rouge">alert()</code> vá»›i UI messages</li>
  <li>Better error messages</li>
</ul>

<p><strong>Files changed:</strong></p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">assets/js/utils.js</code> (new)</li>
  <li><code class="language-plaintext highlighter-rouge">assets/js/admin.js</code></li>
  <li><code class="language-plaintext highlighter-rouge">assets/js/article-viewer.js</code></li>
</ul>

<hr />

<h3 id="7-loading-states-">7. <strong>Loading States</strong> âœ…</h3>
<p><strong>Váº¥n Ä‘á»:</strong> Loading states khÃ´ng nháº¥t quÃ¡n</p>

<p><strong>Giáº£i phÃ¡p:</strong></p>
<ul>
  <li>Táº¡o <code class="language-plaintext highlighter-rouge">setLoading()</code> helper</li>
  <li>Consistent loading indicators</li>
  <li>Better UX</li>
</ul>

<p><strong>Files changed:</strong></p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">assets/js/utils.js</code> (new)</li>
  <li><code class="language-plaintext highlighter-rouge">assets/js/home.js</code></li>
  <li><code class="language-plaintext highlighter-rouge">assets/js/article-viewer.js</code></li>
</ul>

<hr />

<h2 id="-files-created">ğŸ“ Files Created</h2>

<ol>
  <li><strong><code class="language-plaintext highlighter-rouge">assets/js/utils.js</code></strong> - Utility functions chung
    <ul>
      <li><code class="language-plaintext highlighter-rouge">escapeHtml()</code> - XSS protection</li>
      <li><code class="language-plaintext highlighter-rouge">parseApiResponse()</code> - Handle API response format</li>
      <li><code class="language-plaintext highlighter-rouge">getCurrentUser()</code> - Get logged in user</li>
      <li><code class="language-plaintext highlighter-rouge">showError()</code> / <code class="language-plaintext highlighter-rouge">showSuccess()</code> - Error handling</li>
      <li><code class="language-plaintext highlighter-rouge">setLoading()</code> - Loading states</li>
      <li><code class="language-plaintext highlighter-rouge">formatDate()</code> - Date formatting</li>
      <li><code class="language-plaintext highlighter-rouge">slugify()</code> - Slug generation</li>
    </ul>
  </li>
  <li><strong><code class="language-plaintext highlighter-rouge">assets/js/home.js</code></strong> - Home page logic
    <ul>
      <li>Load articles vá»›i pagination support</li>
      <li>Filter by topic</li>
      <li>Error handling</li>
    </ul>
  </li>
  <li><strong><code class="language-plaintext highlighter-rouge">assets/js/article-viewer.js</code></strong> - Article viewer logic
    <ul>
      <li>Load article details</li>
      <li>Load vÃ  submit comments</li>
      <li>XSS protection</li>
    </ul>
  </li>
  <li><strong><code class="language-plaintext highlighter-rouge">assets/js/auth.js</code></strong> - Authentication logic
    <ul>
      <li>Login/Register handling</li>
      <li>Form validation</li>
      <li>Error handling</li>
    </ul>
  </li>
</ol>

<hr />

<h2 id="-files-updated">ğŸ“ Files Updated</h2>

<ol>
  <li><strong><code class="language-plaintext highlighter-rouge">index.html</code></strong>
    <ul>
      <li>Remove inline script</li>
      <li>Include <code class="language-plaintext highlighter-rouge">utils.js</code> vÃ  <code class="language-plaintext highlighter-rouge">home.js</code></li>
      <li>Set API URL config</li>
    </ul>
  </li>
  <li><strong><code class="language-plaintext highlighter-rouge">view.html</code></strong>
    <ul>
      <li>Remove inline script</li>
      <li>Include <code class="language-plaintext highlighter-rouge">utils.js</code> vÃ  <code class="language-plaintext highlighter-rouge">article-viewer.js</code></li>
      <li>Set API URL config</li>
    </ul>
  </li>
  <li><strong><code class="language-plaintext highlighter-rouge">login.html</code></strong>
    <ul>
      <li>Remove inline script</li>
      <li>Include <code class="language-plaintext highlighter-rouge">utils.js</code> vÃ  <code class="language-plaintext highlighter-rouge">auth.js</code></li>
      <li>Set API URL config</li>
    </ul>
  </li>
  <li><strong><code class="language-plaintext highlighter-rouge">admin.html</code></strong>
    <ul>
      <li>Include <code class="language-plaintext highlighter-rouge">utils.js</code> trÆ°á»›c <code class="language-plaintext highlighter-rouge">admin.js</code></li>
    </ul>
  </li>
  <li><strong><code class="language-plaintext highlighter-rouge">assets/js/admin.js</code></strong>
    <ul>
      <li>Fix API response parsing</li>
      <li>Fix hardcoded author_id</li>
      <li>Improve error handling</li>
      <li>Use utils functions</li>
    </ul>
  </li>
  <li><strong><code class="language-plaintext highlighter-rouge">assets/js/view-count.js</code></strong>
    <ul>
      <li>Fix slug detection</li>
      <li>Better error handling</li>
      <li>Support multiple slug sources</li>
    </ul>
  </li>
</ol>

<hr />

<h2 id="-improvements">ğŸ”§ Improvements</h2>

<h3 id="code-organization">Code Organization</h3>
<ul>
  <li>âœ… TÃ¡ch scripts ra files riÃªng</li>
  <li>âœ… Reusable utility functions</li>
  <li>âœ… Consistent error handling</li>
  <li>âœ… Better code structure</li>
</ul>

<h3 id="security">Security</h3>
<ul>
  <li>âœ… XSS protection trong comments</li>
  <li>âœ… Input validation</li>
  <li>âœ… Proper encoding</li>
</ul>

<h3 id="ux">UX</h3>
<ul>
  <li>âœ… Better loading states</li>
  <li>âœ… User-friendly error messages</li>
  <li>âœ… Consistent UI feedback</li>
</ul>

<h3 id="maintainability">Maintainability</h3>
<ul>
  <li>âœ… DRY principle (Donâ€™t Repeat Yourself)</li>
  <li>âœ… Centralized utilities</li>
  <li>âœ… Easier to test vÃ  debug</li>
</ul>

<hr />

<h2 id="ï¸-breaking-changes">âš ï¸ Breaking Changes</h2>

<h3 id="none">None!</h3>
<ul>
  <li>Táº¥t cáº£ changes Ä‘á»u backward compatible</li>
  <li>API khÃ´ng thay Ä‘á»•i</li>
  <li>URLs khÃ´ng thay Ä‘á»•i</li>
</ul>

<hr />

<h2 id="-testing-checklist">ğŸ§ª Testing Checklist</h2>

<ul class="task-list">
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Home page loads articles correctly</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Article viewer displays content correctly</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Comments display vÃ  submit correctly</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />View count works vá»›i slug</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Admin panel loads posts correctly</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Admin can create/edit posts vá»›i correct author_id</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Login/Register works correctly</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Error messages display correctly</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Loading states work correctly</li>
</ul>

<hr />

<h2 id="-next-steps-optional">ğŸ“š Next Steps (Optional)</h2>

<h3 id="short-term">Short Term</h3>
<ul class="task-list">
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Add pagination UI cho home page</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Improve comment form UX</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Add skeleton screens</li>
</ul>

<h3 id="medium-term">Medium Term</h3>
<ul class="task-list">
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Add client-side routing</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Implement state management</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Add offline support</li>
</ul>

<h3 id="long-term">Long Term</h3>
<ul class="task-list">
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Consider framework migration (React/Vue)</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Add build tools (Webpack/Vite)</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Add TypeScript</li>
</ul>

<hr />

<h2 id="-summary">ğŸ“Š Summary</h2>

<p><strong>Files Created:</strong> 4
<strong>Files Updated:</strong> 6
<strong>Critical Issues Fixed:</strong> 4
<strong>Code Quality:</strong> Improved âœ…
<strong>Security:</strong> Improved âœ…
<strong>Maintainability:</strong> Improved âœ…</p>

<p><strong>Status:</strong> âœ… Ready for testing vÃ  deployment</p>


    </main>
    <footer class="site">
  <div class="wrap">
    <div class="panel">
      <div>
        <span class="pill">EN/VI</span>
        <span class="pill">GitHub Pages</span>
        <span class="pill">Jekyll</span>
      </div>
      <div style="margin-top: 10px;">
        Â© 2026 SE-knowledges. Built with Jekyll on GitHub Pages.
      </div>
    </div>
  </div>
</footer>


    
    <!-- Global API Configuration -->
    <script>
      window.API_URL = "https://se-knowledges.jayce-it-work.workers.dev";
      window.VIEW_API_URL = "https://se-knowledges.jayce-it-work.workers.dev";
      console.log("API URL configured:", window.API_URL);
    </script>
    
    <!-- Load utils.js for all pages -->
    <script src="/SE-knowledges/pr-preview/pr-13/assets/js/utils.js"></script>
    
    <!-- Page-specific scripts -->
    
    
    
    
    
    
    
    
    <!-- Verify utils loaded -->
    <script>
      console.log("Utils loaded:", typeof parseApiResponse !== 'undefined');
    </script>
  </body>
</html>

