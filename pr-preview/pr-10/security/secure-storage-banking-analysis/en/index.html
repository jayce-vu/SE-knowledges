<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>
      DETAILED ANALYSIS: BANKING GRADE SECURE STORAGE (ANDROID & iOS) Â· SE-knowledges
    </title>
    <link rel="stylesheet" href="/SE-knowledges/pr-preview/pr-10/assets/css/style.css" />
  </head>
  <body>
    <header class="site">
  <div class="wrap nav">
    <div class="brand">
      <a class="title" href="/SE-knowledges/pr-preview/pr-10/">SE-knowledges</a>
      <span class="subtitle">Technical notes and articles in Vietnamese and English.</span>
    </div>
    <div>
      
      
      
      

      

      
        <a class="button" href="/SE-knowledges/pr-preview/pr-10/security/secure-storage-banking-analysis/en/">English</a>
        <a class="button" href="/SE-knowledges/pr-preview/pr-10/security/secure-storage-banking-analysis/vi/">Tiáº¿ng Viá»‡t</a>
      
    </div>
  </div>
</header>

    <main class="wrap">
      
<meta name="pair-id" content="secure-storage-banking-analysis">


<article class="panel">
  <div class="post-meta">
    2026-01-07
    <span id="view-count-container" style="display:none">
      Â· <span id="view-count">...</span> views
    </span>
    
      Â·
      
        <span class="pill">android</span>
      
        <span class="pill">ios</span>
      
        <span class="pill">security</span>
      
        <span class="pill">banking</span>
      
    
  </div>

  <h1 style="margin-top: 6px;">DETAILED ANALYSIS: BANKING GRADE SECURE STORAGE (ANDROID & iOS)</h1>
  
    <p class="post-meta">Detailed analysis of Banking Grade Secure Storage on Android and iOS, including Android Keystore, iOS Keychain, Secure Enclave, and critical security standards.</p>
  

  
    
      
      
    
  

  <div>
    <h2 id="context">Context</h2>

<p>In banking application development, data security is vital. One of the most important questions from Auditors is: â€œHow is sensitive data (tokens, keys) stored?â€. This article provides a detailed analysis of Banking Grade Secure Storage on both Android and iOS platforms.</p>

<h2 id="i-android--android-keystore-banking-grade">I. ANDROID â€“ ANDROID KEYSTORE (BANKING GRADE)</h2>

<h3 id="1ï¸âƒ£-what-is-android-keystore-correct-understanding">1ï¸âƒ£ What is Android Keystore (Correct Understanding)</h3>

<p>Android Keystore is not a place to store data, but a place to store <strong>KEYS</strong>.</p>

<ul>
  <li><strong>Data (token)</strong> â†’ encrypted</li>
  <li><strong>Encrypted data</strong> â†’ stored in normal file/db/SharedPreferences</li>
  <li><strong>Key for decryption</strong> â†’ resides in Keystore</li>
</ul>

<p>ğŸ‘‰ <strong>An attacker with the data file cannot decrypt it without the key.</strong></p>

<h3 id="2ï¸âƒ£-hardware-backed-tee--strongbox--why-its-critical">2ï¸âƒ£ Hardware-backed (TEE / StrongBox) â€“ Why itâ€™s critical</h3>

<p><strong>TEE (Trusted Execution Environment)</strong></p>
<ul>
  <li>Key resides in a secure hardware area</li>
  <li>OS, app, root cannot read it</li>
  <li>Crypto operations happen inside the TEE</li>
</ul>

<p><strong>StrongBox (Higher Level)</strong></p>
<ul>
  <li>Separate secure chip</li>
  <li>Resistant to physical attacks</li>
  <li>Supported by some high-end devices</li>
</ul>

<p>ğŸ“Œ <strong>Auditor will ask:</strong></p>
<blockquote>
  <p>â€œIs the key hardware-backed?â€</p>
</blockquote>

<ul>
  <li>If âŒ Software-only key â†’ high risk</li>
  <li>If âœ… Hardware-backed â†’ passes most banks</li>
</ul>

<h3 id="3ï¸âƒ£-key-non-exportable--vital">3ï¸âƒ£ Key non-exportable â€“ Vital</h3>

<p><strong>What does it mean?</strong>
The key cannot be exported outside. It cannot be:</p>
<ul>
  <li>memory dumped</li>
  <li>backed up</li>
  <li>copied to another device</li>
</ul>

<p><strong>Why is it important?</strong></p>
<ul>
  <li>Root + memory dump â†’ still cannot retrieve the key</li>
  <li>Token copied to another machine â†’ decryption fails</li>
</ul>

<p>ğŸ‘‰ <strong>If key is exportable â†’ audit fail</strong></p>

<h3 id="4ï¸âƒ£-token-encrypt--store-encrypted-blob-standard-flow">4ï¸âƒ£ Token encrypt â†’ store encrypted blob (Standard Flow)</h3>

<p><strong>Correct Flow:</strong></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[API Response]
    â†“
Encrypt token using Keystore key
    â†“
Encrypted blob (Base64)
    â†“
Store in file / db / SharedPreferences
</code></pre></div></div>

<p>ğŸ“Œ <strong>Important:</strong></p>
<ul>
  <li>Never store raw tokens</li>
  <li>SharedPreferences should only contain the encrypted blob</li>
</ul>

<p><strong>Auditor will check:</strong></p>
<ul>
  <li>Dump filesystem</li>
  <li>If raw token is found â†’ fail</li>
</ul>

<h3 id="5ï¸âƒ£-tie-key-with-user-authentication">5ï¸âƒ£ Tie key with User Authentication</h3>

<p><strong>What does it mean?</strong>
Key can only be used after user authentication:</p>
<ul>
  <li>PIN</li>
  <li>Password</li>
  <li>Biometrics</li>
</ul>

<p><strong>Result:</strong></p>
<ul>
  <li>App opened but not authenticated â†’ decryption fails</li>
  <li>App in background for a long time â†’ must re-authenticate</li>
</ul>

<p>ğŸ‘‰ <strong>Prevents:</strong></p>
<ul>
  <li>Stolen device usage</li>
  <li>Dangerous app auto-login</li>
</ul>

<h3 id="6ï¸âƒ£-tie-key-with-device-lock">6ï¸âƒ£ Tie key with Device Lock</h3>

<p><strong>Meaning:</strong></p>
<ul>
  <li>Device must have a lock screen</li>
  <li>If user disables lock â†’ key is invalidated</li>
</ul>

<p>ğŸ“Œ <strong>Banking apps usually:</strong></p>
<ul>
  <li>Require device to have PIN/Pattern</li>
  <li>If not â†’ block the app</li>
</ul>

<h3 id="7ï¸âƒ£-tie-key-with-biometric-optional-but-strong">7ï¸âƒ£ Tie key with Biometric (Optional but strong)</h3>

<p>Key is only usable after biometric success. Used for:</p>
<ul>
  <li>Transfers</li>
  <li>Viewing sensitive data</li>
</ul>

<p>ğŸ“Œ <strong>Important:</strong></p>
<ul>
  <li>Biometrics do not replace PIN</li>
  <li>Only adds a layer of convenience + extra security</li>
</ul>

<h2 id="ii-ios--keychain--secure-enclave-banking-grade">II. iOS â€“ KEYCHAIN + SECURE ENCLAVE (BANKING GRADE)</h2>

<h3 id="1ï¸âƒ£-ios-keychain--how-is-it-different-from-userdefaults">1ï¸âƒ£ iOS Keychain â€“ How is it different from UserDefaults?</h3>

<table>
  <thead>
    <tr>
      <th>Â </th>
      <th>Keychain</th>
      <th>UserDefaults</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Encrypt</strong></td>
      <td>Plain text</td>
      <td>Â </td>
    </tr>
    <tr>
      <td><strong>OS protected</strong></td>
      <td>File</td>
      <td>Â </td>
    </tr>
    <tr>
      <td><strong>Hardware support</strong></td>
      <td>No</td>
      <td>Â </td>
    </tr>
    <tr>
      <td><strong>Audit accepted</strong></td>
      <td>âŒ</td>
      <td>Â </td>
    </tr>
  </tbody>
</table>

<p>Keychain is the official secure storage of iOS.</p>

<h3 id="2ï¸âƒ£-ksecattraccessiblewhenunlockedthisdeviceonly">2ï¸âƒ£ kSecAttrAccessibleWhenUnlockedThisDeviceOnly</h3>

<p><strong>Explaining each part:</strong></p>
<ul>
  <li><strong>WhenUnlocked:</strong> Only accessible when the device is unlocked</li>
  <li><strong>ThisDeviceOnly:</strong>
    <ul>
      <li>No backup</li>
      <li>No iCloud sync</li>
      <li>No restore to another device</li>
    </ul>
  </li>
</ul>

<p>ğŸ‘‰ <strong>This is a mandatory flag in banking</strong></p>

<p><strong>Auditor will ask:</strong></p>
<blockquote>
  <p>â€œCan the Keychain item be restored?â€</p>
</blockquote>

<h3 id="3ï¸âƒ£-secure-enclave--highest-level-on-ios">3ï¸âƒ£ Secure Enclave â€“ Highest level on iOS</h3>

<p><strong>What is Secure Enclave?</strong></p>
<ul>
  <li>Separate security chip</li>
  <li>Key resides in hardware</li>
  <li>OS cannot read it</li>
</ul>

<p><strong>How Banking uses it:</strong></p>
<ul>
  <li>Key generated inside Secure Enclave</li>
  <li>Key non-exportable</li>
  <li>Crypto operations inside the enclave</li>
</ul>

<p>ğŸ“Œ <strong>Not all devices have it, but:</strong></p>
<ul>
  <li>If available â†’ should be used</li>
  <li>If not â†’ Software-backed Keychain (still OK)</li>
</ul>

<h3 id="4ï¸âƒ£-no-icloud-sync--why">4ï¸âƒ£ No iCloud sync â€“ Why?</h3>

<p>If iCloud sync is enabled:</p>
<ul>
  <li>Token â†’ uploads to cloud</li>
  <li>Restore â†’ another device can decrypt
âŒ <strong>Fail banking policy</strong></li>
</ul>

<p>ğŸ‘‰ <strong>Must:</strong></p>
<ul>
  <li>Disable iCloud sync</li>
  <li>Use <code class="language-plaintext highlighter-rouge">ThisDeviceOnly</code></li>
</ul>

<h3 id="5ï¸âƒ£-device-only-binding-core">5ï¸âƒ£ Device-only binding (Core)</h3>

<p><strong>Meaning:</strong>
Token is bound to:</p>
<ul>
  <li>App instance</li>
  <li>Device hardware</li>
</ul>

<p>Copying to another device â†’ useless</p>

<p>ğŸ“Œ <strong>Combined with backend:</strong></p>
<ul>
  <li>Backend stores device_id</li>
  <li>Token is valid only for that device</li>
</ul>

<h2 id="iii-what-auditors-look-for">III. What Auditors look for?</h2>

<p><strong>Android:</strong></p>
<ul>
  <li>Key hardware-backed?</li>
  <li>Non-exportable?</li>
  <li>Does raw token exist?</li>
  <li>Key tied with auth?</li>
  <li>Root detect â†’ wipe key?</li>
</ul>

<p><strong>iOS:</strong></p>
<ul>
  <li>Keychain access control?</li>
  <li>iCloud disabled?</li>
  <li>Secure Enclave used?</li>
  <li>Backup/restore test?</li>
</ul>

<h2 id="iv-common-mistakes-causing-audit-fail">IV. Common Mistakes causing AUDIT FAIL</h2>

<ul>
  <li>Using SharedPreferences/UserDefaults for tokens</li>
  <li>Key software-only</li>
  <li>Allowing backup</li>
  <li>Token decryptable when app is in background</li>
  <li>Not wiping key upon root/JB</li>
</ul>

<h2 id="v-brief-conclusion">V. Brief Conclusion</h2>

<ul>
  <li>Token is less important than the <strong>KEY</strong></li>
  <li>If Key is not in hardware â†’ <strong>not banking-grade</strong></li>
</ul>

  </div>
</article>

<script>
  window.VIEW_API_URL = "post-views.jayce-it-work.workers.dev";
</script>
<script src="/SE-knowledges/pr-preview/pr-10/assets/js/view-count.js"></script>

<div style="height: 16px;"></div>

<div class="panel">
  
    <a href="/SE-knowledges/pr-preview/pr-10/en/">â† Back to list</a>
  
</div>


    </main>
    <footer class="site">
  <div class="wrap">
    <div class="panel">
      <div>
        <span class="pill">EN/VI</span>
        <span class="pill">GitHub Pages</span>
        <span class="pill">Jekyll</span>
      </div>
      <div style="margin-top: 10px;">
        Â© 2026 SE-knowledges. Built with Jekyll on GitHub Pages.
      </div>
    </div>
  </div>
</footer>


  </body>
</html>

