<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>
      Changelog Â· SE-knowledges
    </title>
    
    <!-- Default Meta Tags -->
    <meta name="description" content="Technical notes and articles in Vietnamese and English." />
    
    <!-- Open Graph / Facebook / LinkedIn / WhatsApp / Telegram / Discord / Slack -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="/SE-knowledges/pr-preview/pr-14/backend/CHANGELOG/" />
    <meta property="og:title" content="Changelog" />
    <meta property="og:description" content="Technical notes and articles in Vietnamese and English." />
    <meta property="og:site_name" content="SE-knowledges" />
    <meta property="og:locale" content="en_US" />
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:url" content="/SE-knowledges/pr-preview/pr-14/backend/CHANGELOG/" />
    <meta name="twitter:title" content="Changelog" />
    <meta name="twitter:description" content="Technical notes and articles in Vietnamese and English." />
    
    <!-- Additional Meta Tags for Better Compatibility -->
    <meta name="theme-color" content="#0b1020" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    
    <link rel="icon" type="image/svg+xml" href="/SE-knowledges/pr-preview/pr-14/assets/favicon.svg">
    <link rel="stylesheet" href="/SE-knowledges/pr-preview/pr-14/assets/css/style.css" />
    
  </head>
  <body>
    <header class="site">
  <div class="wrap nav">
    <div class="brand">
      <a class="title" href="/SE-knowledges/pr-preview/pr-14/">SE-knowledges</a>
      <span class="subtitle">Technical notes and articles in Vietnamese and English.</span>
    </div>
    <div>
      
      
      
      

      

      
        <a class="button" href="/SE-knowledges/pr-preview/pr-14/en/">English</a>
        <a class="button" href="/SE-knowledges/pr-preview/pr-14/vi/">Tiáº¿ng Viá»‡t</a>
      
      
      <!-- Auth Button (Hidden by default, JS toggles) -->
      <a class="button" id="auth-btn" href="/SE-knowledges/pr-preview/pr-14/login/" style="margin-left: 10px; border: 1px solid #ddd;">Login</a>
      <!-- New Post Button (Only visible when logged in) -->
      <a class="button" id="new-post-btn" href="/SE-knowledges/pr-preview/pr-14/admin/" style="margin-left: 10px; border: 1px solid #7ee787; background: rgba(126, 231, 135, 0.1); display: none;">+ New Post</a>
    </div>
  </div>
  
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const token = localStorage.getItem("token");
      const authBtn = document.getElementById("auth-btn");
      const newPostBtn = document.getElementById("new-post-btn");
      
      if (token) {
        // User is logged in
        authBtn.textContent = "Admin";
        authBtn.href = "/SE-knowledges/pr-preview/pr-14/admin/";
        newPostBtn.style.display = "inline-block";
      } else {
        // User is not logged in
        newPostBtn.style.display = "none";
      }
    });
  </script>
</header>

    <main class="wrap">
      <h1 id="changelog">Changelog</h1>

<p>Táº¥t cáº£ cÃ¡c thay Ä‘á»•i Ä‘Ã¡ng chÃº Ã½ trong project nÃ y sáº½ Ä‘Æ°á»£c ghi láº¡i trong file nÃ y.</p>

<h2 id="210---2024-01-xx">[2.1.0] - 2024-01-XX</h2>

<h3 id="-changed">ğŸ”„ Changed</h3>
<ul>
  <li><strong>View Count Logic</strong>: Äáº¿m view theo <code class="language-plaintext highlighter-rouge">article_id</code> thay vÃ¬ <code class="language-plaintext highlighter-rouge">slug</code>
    <ul>
      <li>View count Ä‘Æ°á»£c tá»•ng há»£p cho táº¥t cáº£ ngÃ´n ngá»¯ cá»§a cÃ¹ng má»™t bÃ i viáº¿t</li>
      <li>VÃ­ dá»¥: BÃ i viáº¿t cÃ³ slug <code class="language-plaintext highlighter-rouge">bai-viet-tieng-viet</code> (vi) vÃ  <code class="language-plaintext highlighter-rouge">article-in-english</code> (en) sáº½ cÃ³ cÃ¹ng view count</li>
      <li>Rate limiting váº«n dÃ¹ng slug Ä‘á»ƒ trÃ¡nh spam theo tá»«ng ngÃ´n ngá»¯</li>
    </ul>
  </li>
</ul>

<h3 id="-database-changes">ğŸ“ Database Changes</h3>
<ul>
  <li><strong>Schema Update</strong>: <code class="language-plaintext highlighter-rouge">post_views</code> table thay Ä‘á»•i tá»« <code class="language-plaintext highlighter-rouge">slug TEXT PRIMARY KEY</code> sang <code class="language-plaintext highlighter-rouge">article_id INTEGER PRIMARY KEY</code></li>
  <li><strong>Migration Script</strong>: ThÃªm <code class="language-plaintext highlighter-rouge">migrate_views_to_article_id.sql</code> Ä‘á»ƒ migrate dá»¯ liá»‡u cÅ©</li>
</ul>

<h3 id="ï¸-breaking-changes">âš ï¸ Breaking Changes</h3>
<ul>
  <li><strong>Database Schema</strong>: Cáº§n cháº¡y migration script náº¿u Ä‘Ã£ cÃ³ dá»¯ liá»‡u</li>
  <li><strong>API Behavior</strong>: View count giá» Ä‘Ã¢y lÃ  tá»•ng há»£p cho táº¥t cáº£ ngÃ´n ngá»¯</li>
</ul>

<hr />

<h2 id="200---2024-01-xx">[2.0.0] - 2024-01-XX</h2>

<h3 id="-added">âœ¨ Added</h3>
<ul>
  <li><strong>Health Check Endpoint</strong>: ThÃªm <code class="language-plaintext highlighter-rouge">/health</code> endpoint Ä‘á»ƒ monitor worker status</li>
  <li><strong>Pagination</strong>: GET <code class="language-plaintext highlighter-rouge">/api/articles</code> há»— trá»£ pagination vá»›i <code class="language-plaintext highlighter-rouge">limit</code> vÃ  <code class="language-plaintext highlighter-rouge">offset</code></li>
  <li><strong>Input Validation</strong>:
    <ul>
      <li>Email format validation</li>
      <li>Slug format validation (<code class="language-plaintext highlighter-rouge">^[a-z0-9_-]+$</code>)</li>
      <li>Required fields validation</li>
      <li>Length validation (username, password, content)</li>
    </ul>
  </li>
  <li><strong>Helper Functions</strong>:
    <ul>
      <li><code class="language-plaintext highlighter-rouge">safeJsonParse()</code> - Safe JSON parsing vá»›i error handling</li>
      <li><code class="language-plaintext highlighter-rouge">validateRequired()</code> - Validate required fields</li>
      <li><code class="language-plaintext highlighter-rouge">validateEmail()</code> - Validate email format</li>
      <li><code class="language-plaintext highlighter-rouge">validateSlug()</code> - Validate slug format</li>
      <li><code class="language-plaintext highlighter-rouge">sanitizeError()</code> - Sanitize error messages</li>
    </ul>
  </li>
</ul>

<h3 id="-improved">ğŸ”§ Improved</h3>
<ul>
  <li><strong>Error Handling</strong>:
    <ul>
      <li>Táº¥t cáº£ <code class="language-plaintext highlighter-rouge">await request.json()</code> Ä‘á»u cÃ³ error handling</li>
      <li>Error messages Ä‘Æ°á»£c sanitize (áº©n internal errors trong production)</li>
      <li>Proper HTTP status codes (201 cho create, 200 cho update)</li>
    </ul>
  </li>
  <li><strong>CORS Configuration</strong>:
    <ul>
      <li>CÃ³ thá»ƒ config qua env variable <code class="language-plaintext highlighter-rouge">ALLOWED_ORIGIN</code></li>
      <li>Máº·c Ä‘á»‹nh váº«n lÃ  <code class="language-plaintext highlighter-rouge">*</code> nhÆ°ng cÃ³ thá»ƒ giá»›i háº¡n trong production</li>
    </ul>
  </li>
  <li><strong>API Response</strong>:
    <ul>
      <li>GET <code class="language-plaintext highlighter-rouge">/api/articles</code> tráº£ vá» object vá»›i <code class="language-plaintext highlighter-rouge">data</code> vÃ  <code class="language-plaintext highlighter-rouge">pagination</code> metadata</li>
      <li>Error responses nháº¥t quÃ¡n vá»›i format <code class="language-plaintext highlighter-rouge">{ error: "message" }</code></li>
    </ul>
  </li>
  <li><strong>Validation</strong>:
    <ul>
      <li>Slug validation cho táº¥t cáº£ endpoints sá»­ dá»¥ng slug</li>
      <li>Email validation cho register vÃ  comments</li>
      <li>Content length validation cho comments</li>
      <li>Username vÃ  password length validation</li>
    </ul>
  </li>
</ul>

<h3 id="-fixed">ğŸ› Fixed</h3>
<ul>
  <li><strong>JSON Parsing</strong>: Fix crash khi nháº­n invalid JSON body</li>
  <li><strong>Status Codes</strong>: Fix status code cho POST <code class="language-plaintext highlighter-rouge">/api/admin/articles</code> (200 cho update, 201 cho create)</li>
  <li><strong>Error Messages</strong>: Fix information disclosure trong error messages</li>
  <li><strong>Slug Validation</strong>: ThÃªm validation cho slug format trong view count endpoint</li>
</ul>

<h3 id="-documentation">ğŸ“ Documentation</h3>
<ul>
  <li>Cáº­p nháº­t <code class="language-plaintext highlighter-rouge">API_DOCUMENTATION.md</code> vá»›i:
    <ul>
      <li>Health check endpoint</li>
      <li>Pagination parameters</li>
      <li>Validation requirements</li>
      <li>Error handling improvements</li>
    </ul>
  </li>
  <li>Cáº­p nháº­t <code class="language-plaintext highlighter-rouge">wrangler.toml</code> vá»›i env variables documentation</li>
</ul>

<h3 id="ï¸-breaking-changes-1">âš ï¸ Breaking Changes</h3>
<ul>
  <li>GET <code class="language-plaintext highlighter-rouge">/api/articles</code> response format thay Ä‘á»•i:
    <ul>
      <li><strong>TrÆ°á»›c</strong>: <code class="language-plaintext highlighter-rouge">Array&lt;Article&gt;</code></li>
      <li><strong>Sau</strong>: <code class="language-plaintext highlighter-rouge">{ data: Array&lt;Article&gt;, pagination: {...} }</code></li>
    </ul>
  </li>
</ul>

<h3 id="-security">ğŸ”’ Security</h3>
<ul>
  <li>Sanitize error messages Ä‘á»ƒ trÃ¡nh information disclosure</li>
  <li>Input validation Ä‘á»ƒ trÃ¡nh invalid data</li>
  <li>Slug validation Ä‘á»ƒ trÃ¡nh injection attacks</li>
</ul>

<hr />

<h2 id="100---initial-release">[1.0.0] - Initial Release</h2>

<h3 id="-features">âœ¨ Features</h3>
<ul>
  <li>View count API vá»›i rate limiting</li>
  <li>Public articles API (list vÃ  detail)</li>
  <li>Comments API (get vÃ  create)</li>
  <li>Admin API (create/update articles)</li>
  <li>Topics vÃ  Tags API</li>
  <li>Auth API (register vÃ  login)</li>
  <li>D1 Database integration</li>
  <li>CORS support</li>
</ul>

<hr />

<h2 id="format">Format</h2>

<p>Format dá»±a trÃªn <a href="https://keepachangelog.com/en/1.0.0/">Keep a Changelog</a>,
vÃ  project nÃ y tuÃ¢n thá»§ <a href="https://semver.org/spec/v2.0.0.html">Semantic Versioning</a>.</p>

<h3 id="types-of-changes">Types of Changes</h3>
<ul>
  <li><code class="language-plaintext highlighter-rouge">Added</code> - TÃ­nh nÄƒng má»›i</li>
  <li><code class="language-plaintext highlighter-rouge">Changed</code> - Thay Ä‘á»•i trong functionality hiá»‡n táº¡i</li>
  <li><code class="language-plaintext highlighter-rouge">Deprecated</code> - TÃ­nh nÄƒng sáº¯p bá»‹ loáº¡i bá»</li>
  <li><code class="language-plaintext highlighter-rouge">Removed</code> - TÃ­nh nÄƒng Ä‘Ã£ bá»‹ loáº¡i bá»</li>
  <li><code class="language-plaintext highlighter-rouge">Fixed</code> - Bug fixes</li>
  <li><code class="language-plaintext highlighter-rouge">Security</code> - Security fixes</li>
</ul>


    </main>
    <footer class="site">
  <div class="wrap">
    <div class="panel">
      <div>
        <span class="pill">EN/VI</span>
        <span class="pill">GitHub Pages</span>
        <span class="pill">Jekyll</span>
      </div>
      <div style="margin-top: 10px;">
        Â© 2026 SE-knowledges. Built with Jekyll on GitHub Pages.
      </div>
    </div>
  </div>
</footer>


    
    <!-- Global API Configuration -->
    <script>
      window.API_URL = "https://se-knowledges.jayce-it-work.workers.dev";
      window.VIEW_API_URL = "https://se-knowledges.jayce-it-work.workers.dev";
      console.log("API URL configured:", window.API_URL);
    </script>
    
    <!-- Load utils.js for all pages -->
    <script src="/SE-knowledges/pr-preview/pr-14/assets/js/utils.js"></script>
    
    <!-- Page-specific scripts -->
    
    
    
    
    
    
    
    
    <!-- Verify utils loaded -->
    <script>
      console.log("Utils loaded:", typeof parseApiResponse !== 'undefined');
    </script>
  </body>
</html>

