<header class="site">
  <div class="wrap nav">
    <div class="brand">
      <a class="title" href="{{ '/' | relative_url }}">{{ site.title }}</a>
      <span class="subtitle">{{ site.description }}</span>
    </div>
    <div>
      {% assign current_lang = page.lang | default: 'en' %}
      
      {% assign en_link = '/en/' | relative_url %}
      {% assign vi_link = '/vi/' | relative_url %}

      {% if page.pair_id %}
        {% assign en_post = site.content | where: "pair_id", page.pair_id | where: "lang", "en" | first %}
        {% assign vi_post = site.content | where: "pair_id", page.pair_id | where: "lang", "vi" | first %}
        
        {% if en_post %}
          {% assign en_link = en_post.url | relative_url %}
        {% endif %}
        
        {% if vi_post %}
          {% assign vi_link = vi_post.url | relative_url %}
        {% endif %}
      {% endif %}

      {% if current_lang == 'vi' %}
        <a class="button" href="{{ en_link }}">English</a>
        <a class="button" href="{{ vi_link }}">Tiếng Việt</a>
      {% else %}
        <a class="button" href="{{ en_link }}">English</a>
        <a class="button" href="{{ vi_link }}">Tiếng Việt</a>
      {% endif %}
      
      <!-- Auth Button (Hidden by default, JS toggles) -->
      <a class="button" id="auth-btn" href="{{ '/login/' | relative_url }}" style="margin-left: 10px; border: 1px solid #ddd;">Login</a>
      <!-- New Post Button (Only visible when logged in) -->
      <a class="button" id="new-post-btn" href="{{ '/admin/' | relative_url }}" style="margin-left: 10px; border: 1px solid #7ee787; background: rgba(126, 231, 135, 0.1); display: none;">+ New Post</a>
    </div>
  </div>
  
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const token = localStorage.getItem("token");
      const authBtn = document.getElementById("auth-btn");
      const newPostBtn = document.getElementById("new-post-btn");
      
      if (token) {
        // User is logged in
        authBtn.textContent = "Admin";
        authBtn.href = "{{ '/admin/' | relative_url }}";
        newPostBtn.style.display = "inline-block";
      } else {
        // User is not logged in
        newPostBtn.style.display = "none";
      }
    });
  </script>
</header>
